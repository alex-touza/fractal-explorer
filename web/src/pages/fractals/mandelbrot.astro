---
import Fractal from '@/layouts/Fractal.astro';
import { mandelbrot } from '../../data/fractals';
---

<Fractal fractalInfo={mandelbrot} />

<script>
	import {
		MandelbrotFractal,
		type MandelbrotDataset,
	} from '../../opengl/mandelbrot/mandelbrot';
	import { type FractalCanvas } from '../../opengl';

	const fractal = new MandelbrotFractal();

	const canvas = document.getElementById(
		'canvas',
	) as FractalCanvas<MandelbrotDataset>;

	fractal.begin(canvas);

	requestAnimationFrame(() => fractal.draw());
</script>
